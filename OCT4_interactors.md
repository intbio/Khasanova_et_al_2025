## Предсказанные структуры комплексов ПТФ с белками хроматина
[Back](https://intbio.org/PTF_PPI/)

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Protein Structure Viewer</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        #viewport {
            width: 100%;
            height: 500px;
            border: 1px solid #ddd;
            margin-bottom: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Protein Structure Viewer</h1>
        
        <div id="viewport"></div>
        
        <h2>Structures Table</h2>
        <table>
            <thead>
                <tr>
                    <th>Show</th>
                    <th>Gene</th>
                    <th>Protein</th>
                    <th>IPTM</th>
                    <th>IPSAE</th>
                    <th>pDockQ</th>
                    <th>Download</th>
                </tr>
            </thead>
            <tbody id="structures-table">
                <!-- Table content will be generated by JavaScript -->
            </tbody>
        </table>
    </div>

    <script src="https://unpkg.com/ngl@2.0.0-dev.35/dist/ngl.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script>
        var names = [
            'structures/Q01860_Q9H867_aligned1.pdb',
            'structures/Q01860_P60510_aligned1.pdb',
            'structures/Q01860_Q96G04_aligned1.pdb',
            'structures/Q01860_P62249_aligned1.pdb'
        ];
        var genes = ['A', 'B', 'C', 'D'];
        var proteins = ['A1', 'B2', 'C1', 'D1'];
        var iptm = ['0.75 ± 0.05', '0.82 ± 0.03', '0.68 ± 0.07', '0.79 ± 0.04'];
        var ipsae = ['0.65 ± 0.08', '0.71 ± 0.06', '0.59 ± 0.09', '0.70 ± 0.05'];
        var pdockq = ['0.85 ± 0.02', '0.88 ± 0.01', '0.80 ± 0.03', '0.87 ± 0.02'];
        
        var structureComponents = [];

        $(document).ready(function() {
            // Initialize NGL Stage
            window.stage = new NGL.Stage("viewport", { backgroundColor: "#FFFFFF" });
            
            // Generate table rows and load structures
            var tableBody = $('#structures-table');
            for (var i = 0; i < names.length; i++) {
                // Add row to table
                tableBody.append(`
                    <tr>
                        <td><input type="checkbox" id="struct-${i}" class="struct-toggle"></td>
                        <td>${genes[i]}</td>
                        <td>${proteins[i]}</td>
                        <td>${iptm[i]}</td>
                        <td>${ipsae[i]}</td>
                        <td>${pdockq[i]}</td>
                        <td><a href="https://intbio.org/PTF_PPI/${names[i]}" download>PDB</a></td>
                    </tr>
                `);
                
                // Load structure and store component
                (function(index) {
                    window.stage.loadFile(names[index]).then(function(component) {
                        // Initially hide the structure
                        component.setVisibility(false);
                        
                        // Add representations with fixed colors for chains A and B
                        component.addRepresentation('cartoon', {
                            "sele": ":A",
                            "color": "#D6D6D6",  // серый
                            "aspectRatio": 2,
                            "radius": 1.5
                        });
                        
                        component.addRepresentation('cartoon', {
                            "sele": ":B",
                            "color": "#FFF2CC",  // светло-желтый
                            "aspectRatio": 2,
                            "radius": 1.5
                        });
                        
                        // Store component reference
                        structureComponents[index] = component;
                    });
                })(i);
            }

            // Add spin animation
            window.stage.viewerControls.spin([0, 1, 0], 0.1);

            // Add event listener for checkboxes
            $('.struct-toggle').on('change', function() {
                var index = $(this).attr('id').split('-')[1];
                var isChecked = $(this).is(":checked");
                
                if (structureComponents[index]) {
                    structureComponents[index].setVisibility(isChecked);
                    
                    // Auto-view when structure is selected
                    if (isChecked) {
                        structureComponents[index].autoView();
                    }
                }
            });
        });
        
    </script>
</body>
</html>
